(function(g){var window=this;'use strict';var gbB=function(x,u){if(!Number.isFinite(x))return String(x);x=String(x);var k=x.indexOf(".");k===-1&&(k=x.length);var U=x[0]==="-"?"-":"";U&&(x=x.substring(1));return U+(0,g.Ut9)("0",Math.max(0,u-k))+x},kgW=function(){return{T:"svg",
C:{fill:"#fff",height:"24px",viewBox:"0 0 24 24",width:"24px"},L:[{T:"path",C:{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"}}]}},U3m=function(){return{T:"svg",
C:{fill:"#fff",height:"24px",viewBox:"0 0 24 24",width:"24px"},L:[{T:"path",C:{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"}}]}},F09=function(x){typeof x==="number"?(this.date=m3o(x,0,1),yE(this,1)):g.CR(x)?(this.date=m3o(x.getFullYear(),x.getMonth(),x.getDate()),yE(this,x.getDate())):(this.date=new Date(g.xw()),x=this.date.getDate(),
this.date.setHours(0),this.date.setMinutes(0),this.date.setSeconds(0),this.date.setMilliseconds(0),yE(this,x))},m3o=function(x,u,k){u=new Date(x,u,k);
x>=0&&x<100&&u.setFullYear(u.getFullYear()-1900);return u},yE=function(x,u){x.getDate()!=u&&x.date.setUTCHours(x.date.getUTCHours()+(x.getDate()<u?1:-1))},YD=function(x,u){g.KN.call(this,x,{T:"div",
Z:"ytp-reminder-menu",C:{role:"menu",tabindex:"-1"},L:[{T:"div",Z:"ytp-reminder-menu-contents",L:[{T:"div",Z:"ytp-reminder-menu-items"}]}]},100,!0);this.S=u;this.J=[];this.menuPopupRenderer=void 0;this.items=this.k$("ytp-reminder-menu-items");this.hide()},fso=function(x){return(x.menuPopupRenderer&&x.menuPopupRenderer.items||[]).reduce(function(u,k){k&&k.menuServiceItemRenderer&&u.push(k.menuServiceItemRenderer);
return u},[])},t4=function(x){g.T.call(this,{T:"div",
L:[{T:"button",W$:["ytp-offline-slate-button","ytp-button"],L:[{T:"div",Z:"ytp-offline-slate-button-icon",VX:"{{icon}}"},{T:"div",Z:"ytp-offline-slate-button-text",VX:"{{text}}"}]}]});this.W=x;this.upcomingEventReminderButtonRenderer=this.toggleButtonRenderer=null;this.V=void 0;this.K=this.S=null;(this.j=this.k$("ytp-offline-slate-button"))&&this.Y(this.j,"click",this.D);this.hide()},V3G=function(x,u,k){!x.toggleButtonRenderer&&u&&u.toggleButtonRenderer?x.toggleButtonRenderer=u.toggleButtonRenderer:
u&&u.toggleButtonRenderer||(x.toggleButtonRenderer=null);
!x.upcomingEventReminderButtonRenderer&&k&&g.d(k,bQt)?x.upcomingEventReminderButtonRenderer=g.d(k,bQt):k&&g.d(k,bQt)||(x.upcomingEventReminderButtonRenderer=null);Ea(x)},Ea=function(x){if(x.toggleButtonRenderer){var u=x.toggleButtonRenderer;
if(u.isToggled){var k=u.toggledText?g.te(u.toggledText):"";x.update({text:k,icon:hzG(u.toggledIcon)})}else k=u.defaultText?g.te(u.defaultText):"",x.update({text:k,icon:hzG(u.defaultIcon)});x.show()}else x.upcomingEventReminderButtonRenderer?(u=Xqw(x))?(k=u.text?g.te(u.text):"",x.update({text:k,icon:hzG(u.icon)}),x.show()):x.hide():x.hide()},sYB=function(x,u,k){x.K||(x.K=new g.mv(x.W.X().Ae));
var U={context:g.cM(x.K.config_||g.pW())};g.rK()&&(U.context.clientScreenNonce=g.rK());U.params=k;g.F4(x.K,u,U,{timeout:5E3,onSuccess:function(){x.upcomingEventReminderButtonRenderer&&x.V&&(x.upcomingEventReminderButtonRenderer.currentState=x.V,x.V=void 0)},
onError:function(){qb$(x)},
onTimeout:function(){qb$(x)}})},qb$=function(x){x.toggleButtonRenderer?(x.toggleButtonRenderer.isToggled=!x.toggleButtonRenderer.isToggled,Ea(x)):x.upcomingEventReminderButtonRenderer&&(x.V=void 0,Ea(x))},hzG=function(x){if(!x)return null;
switch(x.iconType){case "NOTIFICATIONS":return kgW();case "NOTIFICATIONS_NONE":return U3m();case "NOTIFICATIONS_ACTIVE":return g.ng();default:return null}},Xqw=function(x){if(!x.upcomingEventReminderButtonRenderer)return null;
var u=x.V||x.upcomingEventReminderButtonRenderer.currentState;x=g.w(x.upcomingEventReminderButtonRenderer.states||[]);for(var k=x.next();!k.done;k=x.next())if((k=g.d(k.value,HQo))&&k.state===u&&k.button&&g.d(k.button,g.J1))return g.d(k.button,g.J1);return null},Rzo=function(x){g.T.call(this,{T:"div",
Z:"ytp-offline-slate",L:[{T:"div",Z:"ytp-offline-slate-background"},{T:"div",Z:"ytp-offline-slate-bar",L:[{T:"span",Z:"ytp-offline-slate-icon",L:[{T:"svg",C:{fill:"#fff",height:"100%",viewBox:"0 0 24 24",width:"100%"},L:[{T:"path",C:{d:"M16.94 6.91l-1.41 1.45c.9.94 1.46 2.22 1.46 3.64s-.56 2.71-1.46 3.64l1.41 1.45c1.27-1.31 2.05-3.11 2.05-5.09s-.78-3.79-2.05-5.09zM19.77 4l-1.41 1.45C19.98 7.13 21 9.44 21 12.01c0 2.57-1.01 4.88-2.64 6.54l1.4 1.45c2.01-2.04 3.24-4.87 3.24-7.99 0-3.13-1.23-5.96-3.23-8.01zM7.06 6.91c-1.27 1.3-2.05 3.1-2.05 5.09s.78 3.79 2.05 5.09l1.41-1.45c-.9-.94-1.46-2.22-1.46-3.64s.56-2.71 1.46-3.64L7.06 6.91zM5.64 5.45L4.24 4C2.23 6.04 1 8.87 1 11.99c0 3.13 1.23 5.96 3.23 8.01l1.41-1.45C4.02 16.87 3 14.56 3 11.99s1.01-4.88 2.64-6.54z"}},
{T:"circle",C:{cx:"12",cy:"12",r:"3"}}]}]},{T:"span",Z:"ytp-offline-slate-messages",L:[{T:"div",Z:"ytp-offline-slate-main-text",C:{"aria-label":"{{label}}"},VX:"{{mainText}}"},{T:"div",Z:"ytp-offline-slate-subtitle-text",VX:"{{subtitleText}}"}]},{T:"span",Z:"ytp-offline-slate-buttons"}]},{T:"button",W$:["ytp-offline-slate-close-button","ytp-button"],L:[g.Wm()]},{T:"button",W$:["ytp-offline-slate-open-button","ytp-button"],L:[g.z0()]}]});var u=this;this.api=x;this.S=this.V=null;this.background=this.k$("ytp-offline-slate-background");
this.J=this.k$("ytp-offline-slate-bar");this.j=new g.gl(function(){g.qN(u.J,"ytp-offline-slate-bar-fade")},15E3);
this.D=!1;this.K=new g.gl(function(){g.qN(u.element,"ytp-offline-slate-collapsed")},15E3);
g.P(this,this.K);g.P(this,this.j);this.countdownTimer=new g.gl(this.kG,1E3,this);this.Y(x,"presentingplayerstatechange",this.uT);this.Y(x,"livestatedata",this.aS);this.Y(this.k$("ytp-offline-slate-close-button"),"click",function(){g.qN(u.element,"ytp-offline-slate-collapsed")});
this.Y(this.k$("ytp-offline-slate-open-button"),"click",function(){g.HN(u.element,"ytp-offline-slate-collapsed")});
this.hide();x=this.getVideoData();x.getPlayerResponse()&&(x=x.getPlayerResponse().playabilityStatus)&&this.aS(x);x=this.api.getPresentingPlayerType()===8&&!this.getVideoData().mT;var k=this.api.getPresentingPlayerType()===8;g.pb(this.element,"ytp-offline-slate-premiere-trailer",x);g.pb(this.element,"ytp-offline-slate-hide-background",k)},pqm=function(x,u,k){if(u){var U=u.subtitleText!=null?g.te(u.subtitleText):"";
k=k?k:u.mainText!=null?g.te(u.mainText):"";var m,F,f,V;u=(V=(m=u.mainText)==null?void 0:(F=m.accessibility)==null?void 0:(f=F.accessibilityData)==null?void 0:f.label)!=null?V:k;x.update({mainText:k,subtitleText:U,label:u});g.pb(x.element,"ytp-offline-slate-single-text-line",!U);g.pb(x.J,"ytp-offline-slate-bar-hidden",!k&&!U)}},GP=function(x,u){var k=(0,g.j4)();
this.module="heartbeat";this.trigger=x;this.S=u;this.J=k},t3$=function(x){g.wj.call(this,x);
var u=this;this.D=!1;this.B=0;this.N=!1;this.V=new g.gl(function(){c99(u)},0);
this.S=this.heartbeatParams=null;this.K=!1;this.j=new g.za(1E3,6E4,1);this.sequenceNumber=0;this.offlineSlate=null;this.t5=new g.mv(void 0);this.attestationResponse=Promise.resolve(void 0);this.U=Promise.resolve(void 0);this.utcOffsetMinutes=-(new F09).getTimezoneOffset();this.J=new g.Pr(this);g.P(this,this.V);g.P(this,this.J);M3Z(this);wqZ(this);this.J.Y(x,"heartbeatparams",this.mS);this.J.Y(x,"presentingplayerstatechange",this.U8);this.J.Y(x,"videoplayerreset",this.oP);this.J.Y(x,g.X0("heartbeat"),
this.onCueRangeEnter);this.K&&this.S&&y9m(this,void 0,this.S);var k=new g.V5(1E3,0x7ffffffffffff,{priority:1,namespace:"heartbeat"}),U=new g.V5(0x8000000000000,0x8000000000000,{id:"stream_end",priority:1,namespace:"heartbeat"});x.tO([k,U]);Ybw(this)},Ybw=function(x){var u=x.getVideoData();
!u.G("use_rta_for_player")&&u.kt&&(u=u.botguardData)&&g.PS(u,x.player.X())},Ebw=function(x){var u,k;
return g.Z(function(U){if(U.S==1)return g.n(U,g.GfW(),2);if(!U.V)return x.sequenceNumber>=3?U.return({error:"ATTESTATION_ERROR_VM_INTERNAL_ERROR"}):U.return(void 0);u=x.getVideoData();k={};return U.return(g.EE4((k.cpn=u.clientPlaybackNonce,k.encryptedVideoId=u.videoId||"",k),1500))})},M3Z=function(x){var u=x.getVideoData();
if(u.kt)if(u.G("use_rta_for_player"))x.attestationResponse=Ebw(x);else if(u=new g.tjW(u),g.QI.isInitialized()||x.sequenceNumber>=3){var k=Promise,U=k.resolve,m=null;if(u.videoData.fk){var F=g.Em5(u);if(F){m={};var f={};F=F.split("&");F=g.w(F);for(var V=F.next();!V.done;V=F.next())V=V.value.split("="),V.length===2&&(f[V[0]]=V[1]);f.r1a&&(m.webResponse=f.r1a);f.r1c&&(m.error=Gg9[Number(f.r1c)]);m.challenge=u.videoData.fk}}x.attestationResponse=U.call(k,m||void 0)}},zzt=function(x){var u=x.getVideoData();
if(!g.Y8(x.getVideoData())||u.UQ)return!1;if(u.N){x=u.N.flavor==="playready"&&u.G("html5_innertube_heartbeats_for_playready");var k=u.N.flavor==="widevine"&&u.G("html5_innertube_heartbeats_for_widevine");u=g.Nk(u.N)&&u.G("html5_innertube_heartbeats_for_fairplay");return!(x||k||u)}return!0},W0G=function(x){if(zzt(x))return!!x.heartbeatParams;
var u=x.getVideoData();return!g.Y8(x.getVideoData())||u.kD||u.yM?!!u.heartbeatToken:!1},zP=function(x,u){if(!x.V.isActive()&&x.D){var k=x.getVideoData();
if(W0G(x)||k.isLivePlayback){if(u===void 0)if(x.N)if(x.K)u=7500;else{var U;u=((U=x.heartbeatParams)==null?0:U.interval)?x.heartbeatParams.interval*1E3:x.getVideoData().k6||6E4}else u=1E3;x.V.start(u)}}},nbZ=function(x,u,k){u.hK&&(k=g.AS(k,{internalipoverride:u.hK}));
var U={cpn:u.clientPlaybackNonce};u.contextParams&&(U.context_params=u.contextParams);u.Nj&&(U.kpt=u.Nj);k=g.AS(k,U);g.$c(k,{format:"RAW",method:"GET",timeout:3E4,onSuccess:function(m){if(!x.V.isActive()&&Wx(x)){x.j.reset();x.sequenceNumber++;m=m.responseText;var F=OQ$(m);if(F){x.player.Xt("onHeartbeat",F);var f=F.status==="ok"?F.stop_heartbeat?2:0:F.status==="stop"?1:F.status==="live_stream_offline"?0:-1}else f=(f=m.match(iQw))?f[1]==="0"?0:1:-1;lsm(x,void 0,F,m,f)}},
onError:function(m){Wx(x)&&Oa(x,!0,"net-"+m.status)},
onTimeout:function(){Wx(x)&&Oa(x,!0,"timeout")},
withCredentials:!0})},c99=function(x){var u,k;
g.Z(function(U){u=x.player.X();k=x.getVideoData();if(!Wx(x))return U.return();if(zzt(x))return $3Z(x,u,k),U.TY(0);M3Z(x);return g.n(U,r9m(x,u,k),0)})},$3Z=function(x,u,k){var U;
if((U=x.heartbeatParams)!=null&&U.url){var m=g.AS(x.heartbeatParams.url,{request_id:g.iVI()});k.RS&&(m=g.AS(m,{vvt:k.RS}),k.mdxEnvironment&&(m=g.AS(m,{mdx_environment:k.mdxEnvironment})));g.Fe(u,k.oauthToken).then(function(F){F&&(m=g.AS(m,{access_token:F}));nbZ(x,k,m)})}},Wx=function(x){var u=x.getVideoData();
return x.player.getPresentingPlayerType()===3||g.A(x.player.getPlayerStateObject(x.getPlayerType()),4)?!1:W0G(x)||u.isLivePlayback?!0:(ic(x),!1)},r9m=function(x,u,k){var U,m,F,f,V,h,X,q,H,R,p,c,Y,E,z,O,r,I,N,L;
return g.Z(function(C){if(C.S==1)return U="player/heartbeat",F={videoId:k.videoId,sequenceNumber:x.sequenceNumber,heartbeatServerData:(m=x.RS)!=null?m:k.heartbeatServerData},x.U=x.attestationResponse,k.kt?g.n(C,x.U,3):C.TY(2);C.S!=2&&(F.attestationResponse=C.V);f=g.fN(k);h=(V=f.client)!=null?V:{};h.utcOffsetMinutes=x.utcOffsetMinutes;F.context=f;F.cpn=k.clientPlaybackNonce;if(X=typeof Intl!=="undefined"?(new Intl.DateTimeFormat).resolvedOptions().timeZone:null)h.timeZone=X;q={heartbeatChecks:[]};
if(H=k.getPlayerResponse())k.heartbeatToken&&(F.heartbeatToken=k.heartbeatToken),(R=H.playabilityStatus)&&(p=R.liveStreamability)&&p.liveStreamabilityRenderer&&q.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_LIVE_STREAM_STATUS");k.heartbeatToken&&q.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_YPC");g.nM(u)&&(q.heartbeatChecks.push("HEARTBEAT_CHECK_TYPE_UNPLUGGED"),c=jYG(x),Y={},c!==null&&(Y.clientPlayerPositionUtcMillis=c),z=(E=x.player.VI())==null?void 0:g.$Z(E),r=((O=z)==null?void 0:O.freePreviewWatchedDuration)||
0,r>0&&(Y.freePreviewWatchedDuration={seconds:""+r}),q.unpluggedParams=Y);F.heartbeatRequestParams=q;k.isLivePlayback?(I=jYG(x),I!==null&&(F.playbackState||(F.playbackState={}),F.playbackState.playbackPosition={utcTimeMillis:I})):u.G("enable_heartbeat_vod_playback_position")&&(N=ZQm(x),N!==null&&(F.playbackState||(F.playbackState={}),F.playbackState.playbackPosition={streamTimeMillis:N}));x.player.publish("heartbeatRequest",F);L={timeout:3E4,onSuccess:function(kI){if(!x.V.isActive()&&Wx(x)){var Fj=
x.getVideoData(),ob=Fj.kt&&x.U==null,K;Fj.kt=!((K=kI.heartbeatAttestationConfig)==null||!K.requiresAttestation)||ob;ob=kI.playabilityStatus;K=JSON.stringify(ob)||"{}";kI.authenticationMismatch&&x.player.A5("authshear",{});var B=-1;var y=kI.playabilityStatus;y&&(x.player.Xt("onHeartbeat",y),y.status==="OK"?B=kI.stopHeartbeat?2:0:y.status==="UNPLAYABLE"?B=1:y.status==="LIVE_STREAM_OFFLINE"&&(B=0));x.sequenceNumber&&B===-1||x.j.reset();x.sequenceNumber++;kI.heartbeatServerData&&(x.RS=kI.heartbeatServerData);
Fj.Gk=kI;(y=kI.playerCueRangeSet)&&g.B5(Fj,y);kI.playerCueRanges&&kI.playerCueRanges.length>0&&(Fj.cueRanges=kI.playerCueRanges);var v,P4;((v=kI.progressBarConfig)==null?0:v.progressBarStartPosition)&&((P4=kI.progressBarConfig)==null?0:P4.progressBarEndPosition)&&(Fj.progressBarStartPosition=kI.progressBarConfig.progressBarStartPosition,Fj.progressBarEndPosition=kI.progressBarConfig.progressBarEndPosition);Fj.compositeLiveIngestionOffsetToken=kI.compositeLiveIngestionOffsetToken;kI.compositeLiveStatusToken!==
Fj.compositeLiveStatusToken&&(Fj.compositeLiveStatusToken=kI.compositeLiveStatusToken);Fj.publish("dataupdated");lsm(x,kI,ob,K,B)}},
onError:function(kI){Wx(x)&&Oa(x,!0,"net-"+kI.status)},
onTimeout:function(){Wx(x)&&Oa(x,!0,"timeout")}};
g.Fe(u,g.de(k)).then(function(kI){kI&&(L.H9="Bearer "+kI);g.F4(x.t5,U,F,L)});
g.wQ(C)})},lsm=function(x,u,k,U,m){m===-1?(k="decode "+g.wS(U,3),Oa(x,!1,k)):m===2?(ic(x),x.N=!0):(x.B=0,x.V.stop(),m===1?(x.N=!1,k&&k.errorCode==="PLAYABILITY_ERROR_CODE_EMBARGOED"&&x.player.Uj(!0),m="pe."+(k==null?void 0:k.errorCode)+";ps."+(k==null?void 0:k.status),x.player.jj("heartbeat.stop",2,x.u4(U),m),g.RV("heartbeatActionPlayerHalted",ask(k)),(u==null?0:u.videoTransitionEndpoint)&&k&&(u=u.videoTransitionEndpoint,(U=g.d(u,g.x8))&&QY9(x,U,k,{itct:u==null?void 0:u.clickTrackingParams}))):(x.N=
!0,U=0,x.K&&k&&(U=y9m(x,u,k),x.player.publish("livestatedata",k)),U?zP(x,U):zP(x)))},y9m=function(x,u,k){var U=k.liveStreamability&&k.liveStreamability.liveStreamabilityRenderer,m=!(!U||!(U.switchStreamsImmediately||U.transitionTiming&&U.transitionTiming==="STREAM_TRANSITION_TIMING_IMMEDIATELY"));
u=Iss(x,u,U);var F=x.getVideoData(),f=x.player.getPlayerStateObject(x.getPlayerType()),V=f.isPlaying()&&!g.l_(F)&&!x.player.isAtLiveHead(x.getPlayerType());if(F.X().Yi()){var h,X=((h=x.player.e$())==null?void 0:h.t9())||{};X.status=k.status||"";X.dvr=""+ +V;X["switch"]=""+ +m;X.ended=""+ +!(!U||!U.displayEndscreen);x.player.A5("heartbeat",X)}if(V&&!m)return u;m=U&&U.streamTransitionEndpoint&&g.d(U.streamTransitionEndpoint,g.x8);if((U&&U.transitionTiming)==="STREAM_TRANSITION_TIMING_AT_STREAM_END")x.getVideoData().transitionEndpointAtEndOfStream=
m;else if(m&&QY9(x,m,k))return u;if(k.status.toUpperCase()==="OK"){m=U&&U.broadcastId;h=x.S&&x.S.liveStreamability&&x.S.liveStreamability.liveStreamabilityRenderer&&x.S.liveStreamability.liveStreamabilityRenderer.broadcastId;V=m!==h&&m!=null;if(!g.zd(F)||V){var q={video_id:F.videoId};F.dn&&(q.is_live_destination="1");q.disable_watch_next=!0;q.raw_watch_next_response=F.getWatchNextResponse();q.autonav_state=F.autonavState;q.oauth_token=F.oauthToken;q.force_gvi=F.Fq;q.Cn=F.Cn;F.j&&(q.vss_credentials_token=
F.j,q.vss_credentials_token_type=F.pS);F.RS&&(q.vvt=F.RS);U=void 0;g.zd(F)?V&&(U=new GP("broadcastIdChanged",h+","+m),x.AY("HEARTBEAT_ACTION_TRIGGER_IMMEDIATE","HEARTBEAT_ACTION_TRANSITION_REASON_BROADCAST_ID_CHANGED",k)):(m&&(U=new GP("formatsReceived",""+m)),x.AY("HEARTBEAT_ACTION_TRIGGER_IMMEDIATE","HEARTBEAT_ACTION_TRANSITION_REASON_LIVE_STREAM_WENT_ONLINE",k));x.player.loadVideoByPlayerVars(q,void 0,void 0,void 0,U);return u}x.player.Ka("heartbeat",x.getPlayerType())}U&&U.displayEndscreen&&(x.offlineSlate?
(x=x.offlineSlate,x.D=!0,x.Tx&&x.api.OA()):f.isBuffering()&&(F=((q=x.player.e$())==null?void 0:q.t9())||{},x.player.A5("hbse",F,!0),x.player.OA(),x.player.Xt("onLiveMediaEnded",k)));return u},Iss=function(x,u,k){return x.player.G("web_player_use_heartbeat_poll_delay_ms")&&(x=Number(u==null?void 0:u.pollDelayMs))?x:(k=Number(k==null?void 0:k.pollDelayMs))?k:0},Oa=function(x,u,k){var U=x.player.X();
if(!x.V.isActive()){x.V.stop();x.B++;var m=u?"heartbeat.net":"heartbeat.servererror";var F=x.getVideoData();if(F.aH||u&&!g.Y8(x.getVideoData())&&!W0G(x)&&F.isLivePlayback)F=!1;else{var f,V;((V=x.heartbeatParams)==null?0:V.retries)?f=x.heartbeatParams.retries:f=F.nB||5;F=x.B>=f}F?(g.RV("heartbeatActionPlayerHalted",u?{enforcedPolicyToHaltOnNetworkFailure:!0}:ask()),(u=x.getVideoData())&&u.isLivePlayback?x.player.jj(m,1,"Video playback interrupted. Please try again.",k):x.player.jj(m,1,"Sorry, there was an error while licensing this video.",
k)):(U.G("html5_report_non_fatal_heartbeat_error")&&x.player.vL(m,{msg:k}),zP(x,x.j.getValue()),g.Wi(x.j))}},ask=function(x){var u={enforcedPolicyToHaltOnNetworkFailure:!1};
x&&(u.serializedServerContext=x.additionalLoggingData);return u},ic=function(x){x.B=0;
x.V.stop();x.N=!1;x.sequenceNumber=0},wqZ=function(x){var u=x.getVideoData(),k=x.player.X();
if(u.isLivePlayback)if(g.Ul(k.N)){x.K=!0;x.D=!0;if(!g.r$(k)||g.nM(k))x.offlineSlate=new Rzo(x.player),g.P(x,x.offlineSlate),g.QD(x.player,x.offlineSlate.element,4);(u=u.getPlayerResponse())&&u.playabilityStatus&&(x.S=u.playabilityStatus);var U;((U=x.S)==null?void 0:U.status)!=="UNPLAYABLE"&&(x.S?(U=Iss(x,void 0,x.S.liveStreamability&&x.S.liveStreamability.liveStreamabilityRenderer))?zP(x,U):zP(x,7500):zP(x,1E3))}else x.player.jj("html5.unsupportedlive",2,"HTML5_NO_AVAILABLE_FORMATS_FALLBACK","nolive.1");
else g.DG(u.nm,"heartbeat")&&x.player.Ka("heartbeat",x.getPlayerType())},QY9=function(x,u,k,U){var m=u&&u.videoId;
return m?(x.player.ZR(m,Object.assign({},{autonav:"1"},U||{}),void 0,!0,!0,u,g.de(x.getVideoData())),x.AY("HEARTBEAT_ACTION_TRIGGER_IMMEDIATE","HEARTBEAT_ACTION_TRANSITION_REASON_HAS_NEW_STREAM_TRANSITION_ENDPOINT",k),!0):!1},jYG=function(x){return(x=x.player.getProgressState(x.getPlayerType()).ingestionTime)&&isFinite(x)?""+Math.floor(x*1E3):null},ZQm=function(x){return(x=x.player.getCurrentTime(x.getPlayerType()))&&isFinite(x)?""+Math.floor(x*1E3):null},OQ$=function(x){try{var u=JSON.parse(x);
return u!=null?u:void 0}catch(k){}},ezo={ERAS:["BC",
"AD"],ERANAMES:["Before Christ","Anno Domini"],NARROWMONTHS:"JFMAMJJASOND".split(""),STANDALONENARROWMONTHS:"JFMAMJJASOND".split(""),MONTHS:"January February March April May June July August September October November December".split(" "),STANDALONEMONTHS:"January February March April May June July August September October November December".split(" "),SHORTMONTHS:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONESHORTMONTHS:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
WEEKDAYS:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),STANDALONEWEEKDAYS:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTWEEKDAYS:"Sun Mon Tue Wed Thu Fri Sat".split(" "),STANDALONESHORTWEEKDAYS:"Sun Mon Tue Wed Thu Fri Sat".split(" "),NARROWWEEKDAYS:"SMTWTFS".split(""),STANDALONENARROWWEEKDAYS:"SMTWTFS".split(""),SHORTQUARTERS:["Q1","Q2","Q3","Q4"],QUARTERS:["1st quarter","2nd quarter","3rd quarter","4th quarter"],AMPMS:["AM","PM"],DATEFORMATS:["EEEE, MMMM d, y",
"MMMM d, y","MMM d, y","M/d/yy"],TIMEFORMATS:["h:mm:ss\u202fa zzzz","h:mm:ss\u202fa z","h:mm:ss\u202fa","h:mm\u202fa"],DATETIMEFORMATS:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],FIRSTDAYOFWEEK:6,WEEKENDRANGE:[5,6],FIRSTWEEKCUTOFFDAY:5};
ezo={ERAS:["BC","AD"],ERANAMES:["Before Christ","Anno Domini"],NARROWMONTHS:"JFMAMJJASOND".split(""),STANDALONENARROWMONTHS:"JFMAMJJASOND".split(""),MONTHS:"January February March April May June July August September October November December".split(" "),STANDALONEMONTHS:"January February March April May June July August September October November December".split(" "),SHORTMONTHS:"Jan Feb Mar Apr May Jun Jul Aug Sept Oct Nov Dec".split(" "),STANDALONESHORTMONTHS:"Jan Feb Mar Apr May Jun Jul Aug Sept Oct Nov Dec".split(" "),
WEEKDAYS:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),STANDALONEWEEKDAYS:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTWEEKDAYS:"Sun Mon Tue Wed Thu Fri Sat".split(" "),STANDALONESHORTWEEKDAYS:"Sun Mon Tue Wed Thu Fri Sat".split(" "),NARROWWEEKDAYS:"SMTWTFS".split(""),STANDALONENARROWWEEKDAYS:"SMTWTFS".split(""),SHORTQUARTERS:["Q1","Q2","Q3","Q4"],QUARTERS:["1st quarter","2nd quarter","3rd quarter","4th quarter"],AMPMS:["am","pm"],DATEFORMATS:["EEEE, d MMMM y",
"d MMMM y","d MMM y","dd/MM/y"],TIMEFORMATS:["HH:mm:ss zzzz","HH:mm:ss z","HH:mm:ss","HH:mm"],DATETIMEFORMATS:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],FIRSTDAYOFWEEK:0,WEEKENDRANGE:[5,6],FIRSTWEEKCUTOFFDAY:3};
var Gg9=["ATTESTATION_ERROR_UNKNOWN","ATTESTATION_ERROR_VM_NOT_INITIALIZED","ATTESTATION_ERROR_VM_NO_RESPONSE","ATTESTATION_ERROR_VM_TIMEOUT","ATTESTATION_ERROR_VM_INTERNAL_ERROR"],J9W={300:"STREAMING_DEVICES_QUOTA_PER_24H_EXCEEDED",301:"ALREADY_PINNED_ON_A_DEVICE",303:"STOPPED_BY_ANOTHER_PLAYBACK",304:"TOO_MANY_STREAMS_PER_USER",305:"TOO_MANY_STREAMS_PER_ENTITLEMENT",400:"VIDEO_NOT_FOUND",401:"GEO_FAILURE",402:"STREAMING_NOT_ALLOWED",403:"UNSUPPORTED_DEVICE",405:"VIDEO_FORBIDDEN",500:"PURCHASE_NOT_FOUND",
501:"RENTAL_EXPIRED",502:"PURCHASE_REFUNDED",5E3:"BAD_REQUEST",5001:"CGI_PARAMS_MISSING",5002:"CGI_PARAMS_MALFORMED",5100:"AUTHENTICATION_MISSING",5101:"AUTHENTICATION_MALFORMED",5102:"AUTHENTICATION_EXPIRED",5200:"CAST_TOKEN_MALFORMED",5201:"CAST_TOKEN_EXPIRED",5202:"CAST_TOKEN_FAILED",5203:"CAST_SESSION_VIDEO_MISMATCHED",5204:"CAST_SESSION_DEVICE_MISMATCHED",6E3:"INVALID_DRM_MESSAGE",7E3:"SERVER_ERROR",8E3:"RETRYABLE_ERROR"};g.b=F09.prototype;g.b.Ah=ezo.FIRSTDAYOFWEEK;g.b.Ro=ezo.FIRSTWEEKCUTOFFDAY;
g.b.clone=function(){var x=new F09(this.date);x.Ah=this.Ah;x.Ro=this.Ro;return x};
g.b.getFullYear=function(){return this.date.getFullYear()};
g.b.getYear=function(){return this.getFullYear()};
g.b.getMonth=function(){return this.date.getMonth()};
g.b.getDate=function(){return this.date.getDate()};
g.b.getTime=function(){return this.date.getTime()};
g.b.getDay=function(){return this.date.getDay()};
g.b.getUTCFullYear=function(){return this.date.getUTCFullYear()};
g.b.getUTCMonth=function(){return this.date.getUTCMonth()};
g.b.getUTCDate=function(){return this.date.getUTCDate()};
g.b.getUTCDay=function(){return this.date.getDay()};
g.b.getUTCHours=function(){return this.date.getUTCHours()};
g.b.getUTCMinutes=function(){return this.date.getUTCMinutes()};
g.b.getTimezoneOffset=function(){return this.date.getTimezoneOffset()};
g.b.set=function(x){this.date=new Date(x.getFullYear(),x.getMonth(),x.getDate())};
g.b.setFullYear=function(x){this.date.setFullYear(x)};
g.b.setYear=function(x){this.setFullYear(x)};
g.b.setMonth=function(x){this.date.setMonth(x)};
g.b.setDate=function(x){this.date.setDate(x)};
g.b.setTime=function(x){this.date.setTime(x)};
g.b.setUTCFullYear=function(x){this.date.setUTCFullYear(x)};
g.b.setUTCMonth=function(x){this.date.setUTCMonth(x)};
g.b.setUTCDate=function(x){this.date.setUTCDate(x)};
g.b.add=function(x){if(x.years||x.months){var u=this.getMonth()+x.months+x.years*12,k=this.getYear()+Math.floor(u/12);u%=12;u<0&&(u+=12);a:{switch(u){case 1:var U=k%4!=0||k%100==0&&k%400!=0?28:29;break a;case 5:case 8:case 10:case 3:U=30;break a}U=31}U=Math.min(U,this.getDate());this.setDate(1);this.setFullYear(k);this.setMonth(u);this.setDate(U)}x.days&&(k=this.getYear(),u=k>=0&&k<=99?-1900:0,x=new Date((new Date(k,this.getMonth(),this.getDate(),12)).getTime()+x.days*864E5),this.setDate(1),this.setFullYear(x.getFullYear()+
u),this.setMonth(x.getMonth()),this.setDate(x.getDate()),yE(this,x.getDate()))};
g.b.mE=function(x){return!(!x||this.getYear()!=x.getYear()||this.getMonth()!=x.getMonth()||this.getDate()!=x.getDate())};
g.b.toString=function(){var x=this.getFullYear(),u=x<0?"-":x>=1E4?"+":"";return[u+gbB(Math.abs(x),u?6:4),gbB(this.getMonth()+1,2),gbB(this.getDate(),2)].join("")+""};
g.b.valueOf=function(){return this.date.valueOf()};var P49=new g.rf("addUpcomingEventReminderEndpoint");var NJt=new g.rf("removeUpcomingEventReminderEndpoint");var d3G=new g.rf("updateUpcomingEventReminderButtonStateCommand");var bQt=new g.rf("upcomingEventReminderButtonRenderer"),HQo=new g.rf("upcomingEventReminderButtonStateRenderer");g.M(YD,g.KN);
YD.prototype.updateMenuItems=function(){var x=this,u=fso(this),k=0;k=0;for(var U={};k<u.length;U={qf:void 0},k++){var m=this.J[k];m||(m=new g.T({T:"div",Z:"ytp-reminder-menu-item",C:{role:"menuitem",tabindex:"0"},L:[{T:"div",Z:"ytp-reminder-menu-item-icon",VX:"{{icon}}"},{T:"div",Z:"ytp-reminder-menu-item-label",VX:"{{text}}"}]}),U.qf=k,m.listen("click",function(f){return function(){var V=f.qf;x.aU();V=fso(x)[V];x.publish("reminderMenuItemClicked",V.serviceEndpoint||V.command)}}(U)),m.pm(this.items),
this.J[k]=m);
var F=u[k];U=null;switch(F.icon&&F.icon.iconType){case "NOTIFICATIONS":U=kgW();break;case "NOTIFICATIONS_NONE":U=U3m();break;case "NOTIFICATIONS_ACTIVE":U=g.ng()}F=F.text?g.te(F.text):"";m.update({icon:U,text:F})}for(;k<this.J.length;)this.J.pop().dispose();k===0?this.aU():this.Bl(this.S)};
YD.prototype.hide=function(){this.S&&this.S.removeAttribute("aria-haspopup");g.KN.prototype.hide.call(this)};
YD.prototype.show=function(){this.S&&this.S.setAttribute("aria-haspopup","true");g.KN.prototype.show.call(this)};
YD.prototype.SJ=function(){g.VG(this.J);g.KN.prototype.SJ.call(this)};g.M(t4,g.T);
t4.prototype.D=function(){if(this.toggleButtonRenderer){var x=this.toggleButtonRenderer;x.isToggled?this.J(x.toggledServiceEndpoint):this.J(x.defaultServiceEndpoint);x.isToggled=!x.isToggled;Ea(this)}else if(this.upcomingEventReminderButtonRenderer)if(this.S&&this.S.Tx)this.S.aU();else{var u=Xqw(this);u&&this.J(u.serviceEndpoint||u.command);u=((x=g.d(u==null?void 0:u.command,g.Es))==null?void 0:x.commands)||[];a:{x=g.w(u);for(var k=x.next();!k.done;k=x.next()){var U=u=void 0;if(k=(u=g.d(k.value,g.HIm))==
null?void 0:(U=u.popup)==null?void 0:U.menuPopupRenderer){x=k;break a}}x=void 0}this.S||(this.S=new YD(this.W,this.j),this.S.pm(this.element),g.P(this,this.S),this.S.subscribe("reminderMenuItemClicked",this.J,this));u=this.S;u.menuPopupRenderer=x;u.updateMenuItems()}};
t4.prototype.J=function(x){var u=g.d(x,P49),k=g.d(x,NJt);if(x&&(u||k)){if(u){var U=u;var m="notification/add_upcoming_event_reminder"}else k&&(U=k,m="notification/remove_upcoming_event_reminder");if(m&&U&&U.params)for(sYB(this,m,U.params),x=g.w(U.commands||[]),u=x.next();!u.done;u=x.next())if((u=u.value)&&g.d(u,d3G)){this.V=g.d(u,d3G).state;Ea(this);break}}};g.M(Rzo,g.T);g.b=Rzo.prototype;g.b.getPlayerType=function(){if(this.api.getPresentingPlayerType()===8)return 1};
g.b.getVideoData=function(){return this.api.getVideoData(this.getPlayerType())};
g.b.aS=function(x){var u,k,U=x==null?void 0:(u=x.liveStreamability)==null?void 0:(k=u.liveStreamabilityRenderer)==null?void 0:k.offlineSlate;if(U){this.V=x;u=U.liveStreamOfflineSlateRenderer;u.canShowCountdown?this.kG():pqm(this,u);var m,F,f,V;if(k=x==null?void 0:(m=x.liveStreamability)==null?void 0:(F=m.liveStreamabilityRenderer)==null?void 0:(f=F.offlineSlate)==null?void 0:(V=f.liveStreamOfflineSlateRenderer)==null?void 0:V.thumbnail){m=0;F=null;f=k.thumbnails;for(V=0;V<f.length;V++)f[V].width>
m&&(m=f[V].width||0,F=f[V].url);F&&(this.background.style.backgroundImage="url("+F+")")}else this.background.style.backgroundImage="";u.actionButtons||u.reminderButton?(this.S||(this.S=new t4(this.api),this.S.pm(this.k$("ytp-offline-slate-buttons")),g.P(this,this.S)),V3G(this.S,u.actionButtons&&u.actionButtons[0],u.reminderButton)):this.S&&V3G(this.S,null,null);this.V=x}else this.V=null;this.uT()};
g.b.uT=function(x){if(this.api.getPresentingPlayerType()===8)var u=!0;else{var k=this.api.getPlayerStateObject(),U=this.getVideoData();u=U.isLivePlayback&&(k.isBuffering()||g.A(k,2)||g.A(k,64));var m=U.autonavState===2&&g.A(k,2);k=k.isPlaying()&&!g.l_(U)&&!this.api.isAtLiveHead(void 0,!0);u=u&&!k&&!m}u&&this.V?this.Tx?(x==null?0:g.YA(x,2))&&!this.getVideoData().mT&&(g.HN(this.element,"ytp-offline-slate-collapsed"),this.K.stop(),g.HN(this.J,"ytp-offline-slate-bar-fade"),this.j.start()):(this.show(),
this.K.start(),this.api.publish("offlineslatestatechange"),this.D&&this.api.OA()):this.Tx&&(this.hide(),this.api.publish("offlineslatestatechange"))};
g.b.kG=function(){var x,u,k,U,m=(x=this.V)==null?void 0:(u=x.liveStreamability)==null?void 0:(k=u.liveStreamabilityRenderer)==null?void 0:(U=k.offlineSlate)==null?void 0:U.liveStreamOfflineSlateRenderer;m&&(x=Math.floor(g.xw()/1E3),u=m.canShowCountdown&&Number(m.scheduledStartTime),!u||u<=x?(pqm(this,m),this.countdownTimer.stop()):(pqm(this,m,g.nD(u-x)),g.ky(this.countdownTimer)))};
g.b.SJ=function(){this.countdownTimer.dispose();this.countdownTimer=null;g.T.prototype.SJ.call(this)};GP.prototype.V=function(x){return this.trigger&&x.trigger?this.module===x.module&&this.trigger===x.trigger&&this.S===x.S:!1};
GP.prototype.isExpired=function(){return(0,g.j4)()-this.J>6E4};
GP.prototype.toString=function(){return this.module+":"+this.trigger+":"+this.S};g.M(t3$,g.wj);g.b=t3$.prototype;g.b.SJ=function(){ic(this);this.player.Gw("heartbeat");g.wj.prototype.SJ.call(this)};
g.b.onCueRangeEnter=function(){this.D=!0;zP(this,2E3)};
g.b.mS=function(x){this.heartbeatParams=x;zP(this,2E3)};
g.b.U8=function(x){var u;this.player.getPresentingPlayerType()!==8&&((u=this.S)==null?void 0:u.status)!=="UNPLAYABLE"&&(g.A(x.state,2)||g.A(x.state,64)?(ic(this),this.K&&(this.D=!0,zP(this,1E3))):(g.A(x.state,1)||g.A(x.state,8))&&zP(this,2E3))};
g.b.oP=function(){this.player.getPresentingPlayerType()!==3&&zP(this,2E3)};
g.b.getPlayerType=function(){if(this.player.getPresentingPlayerType()===8)return 1};
g.b.getVideoData=function(){return this.player.getVideoData(this.getPlayerType())};
g.b.JK=function(x){switch(x){case 4:case 3:return!1}return!0};
g.b.AY=function(x,u,k){x={trigger:x,reason:u};k&&(x.serializedServerContext=k.additionalLoggingData);g.RV("heartbeatActionPlayerTransitioned",x)};
g.b.u4=function(x){var u="LICENSE",k=OQ$(x);if(k)return k.reason||g.N2[u]||"";if(x=x.match(iQw))if(x=Number(x[1]))u=(u=J9W[x.toString()])?u:"LICENSE";return g.N2[u]||""};
g.b.nU=function(){return!!this.offlineSlate&&this.offlineSlate.Tx};
var iQw=/^GLS\/1.0 (\d+) (\w+).*?\r\n\r\n([\S\s]*)$/;g.M2("heartbeat",t3$);})(_yt_player);
